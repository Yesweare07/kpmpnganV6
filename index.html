<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>KPMPNGN ‚Äî Pampanga Guide</title>

  <!-- Main CSS -->
  <link rel="stylesheet" href="style.css">

  <!-- PWA -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#000000">
  <link rel="apple-touch-icon" href="icons/icon-192.png">

  <!-- Internal Style Overrides -->
  <style>
    .menu-btn {
      background: none;
      border: none;
      color: var(--accent);
      font-size: 22px;
      cursor: pointer;
      position: absolute;
      right: 16px;
      top: 18px;
    }

    #missionModal .modal-card {
      background: rgba(15, 15, 15, 0.95);
      border: 1px solid #222;
      color: var(--accent);
      text-align: left;
      max-width: 340px;
      padding: 20px;
    }

    #missionModal h2 {
      font-size: 1.25rem;
      margin-bottom: 10px;
    }

    #missionModal p {
      color: var(--muted);
      font-size: 0.9rem;
      line-height: 1.4em;
      margin-bottom: 10px;
    }

    #missionModal hr {
      border: none;
      border-top: 1px solid #333;
      margin: 15px 0;
    }

    /* Fun Fact Box */
    .fun-fact-box {
      background: #141414;
      border: 1px solid #222;
      padding: 15px;
      border-radius: 12px;
      margin: 20px 0;
      color: #eaeaea;
      box-shadow: 0 0 8px #000;
    }

    .fun-fact-box h3 {
      margin: 0 0 8px 0;
      font-size: 18px;
      color: #fff;
    }

    /* Big News Card */
    .big-news-card {
      display: flex;
      flex-direction: column;
      width: 100%;
      background: var(--card);
      border: 1px solid #333;
      border-radius: 12px;
      overflow: hidden;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.6);
      cursor: pointer;
    }

    .big-news-thumb {
      width: 100%;
      height: 200px;
      background-size: cover;
      background-position: center;
    }

    .big-news-body {
      padding: 16px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .big-news-title {
      font-size: 18px;
      font-weight: 700;
      color: #fff;
      margin: 0;
    }

    .big-news-desc {
      font-size: 14px;
      color: #aaa;
      margin: 0;
    }

  </style>
</head>

<body>

  <!-- LOGIN OVERLAY -->
  <div id="loginOverlay" class="login-overlay">
    <div class="login-frame">

      <div class="login-header">
        <p class="greeting">KUMUSTA CABALEN!</p>
        <h1 class="app-title">KPMPNGN</h1>
      </div>

      <div class="login-icon">
        <img src="https://png.pngtree.com/png-clipart/20231020/original/pngtree-large-colorful-star-mandala-circle-ui-art-drawing-png-image_13374553.png" alt="Parol">
      </div>

      <!-- LOGIN FORM -->
      <form id="loginForm" autocomplete="off">
        <h3 style="margin:0 0 15px 0; font-size:14px;">LOG IN</h3>

        <div class="input-group">
          <label>USERNAME</label>
          <input type="text" id="loginUser" placeholder="Enter username" required>
        </div>

        <div class="input-group">
          <label>PASSWORD</label>
          <input type="password" id="loginPass" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" required>
        </div>

        <div class="button-row">
          <button type="submit" class="btn-outline">LOGIN</button>
          <button type="button" class="btn-outline" onclick="switchForm('register')">SIGN UP</button>
        </div>

        <a href="#" class="forgot-link" onclick="switchForm('forgot')">FORGET PASSWORD?</a>
      </form>

      <!-- REGISTER FORM -->
      <form id="registerForm" autocomplete="off" style="display:none;">
        <h3>CREATE ACCOUNT</h3>
        <div class="input-group">
          <label>NEW USERNAME</label>
          <input type="text" id="regUser" required>
        </div>

        <div class="input-group">
          <label>NEW PASSWORD</label>
          <input type="password" id="regPass" required>
        </div>

        <div class="button-row">
          <button type="submit" class="btn-outline">REGISTER</button>
          <button type="button" class="btn-outline" onclick="switchForm('login')">BACK</button>
        </div>
      </form>

      <!-- FORGOT FORM -->
      <form id="forgotForm" autocomplete="off" style="display:none;">
        <h3>RECOVER ACCOUNT</h3>
        <p style="font-size:10px; color:#ccc;">Enter your username to retrieve your password.</p>

        <div class="input-group">
          <label>YOUR USERNAME</label>
          <input type="text" id="forgotUser" required>
        </div>

        <div class="button-row">
          <button type="submit" class="btn-outline">GET PASSWORD</button>
          <button type="button" class="btn-outline" onclick="switchForm('login')">BACK</button>
        </div>
      </form>

    </div>
  </div>

  <!-- MAIN APP -->
  <div class="phone-shell app-hidden" role="application">

    <!-- TOP BAR -->
    <header class="topbar">
      <div class="brand-wrap">
        <img src="https://png.pngtree.com/png-clipart/20231020/original/pngtree-large-colorful-star-mandala-circle-ui-art-drawing-png-image_13374553.png"
          class="app-logo" style="max-width:48px; margin-right:8px; filter:invert(1);">
        <div>
          <div class="brand">KPMPNGN</div>
          <div class="subtitle">Kapampangan Travel Buddy</div>
        </div>

        <button id="menuBtn" class="menu-btn">‚ãÆ</button>
      </div>
    </header>

    <!-- SCREENS -->
    <main class="screen">

      <!-- HOME -->
      <section id="home" class="page active">
        <h1>Welcome</h1>
        <p class="muted">Latest updates and happenings in Pampanga.</p>

        <div class="fun-fact-box">
          <h3>Fun Fact</h3>
          <p id="funFactText">Loading fun fact...</p>
        </div>

        <h2 style="border-bottom:1px solid #222;">Latest News</h2>
        <div id="news-list"></div>
      </section>

      <!-- Municipalities -->
      <section id="municipalities" class="page">
        <h2>Municipalities & Cities</h2>
        <p class="muted">Tap an item to open info.</p>
        <div id="muni-list" class="cards"></div>
      </section>

      <!-- Food -->
      <section id="foods" class="page">
        <h2>Kapampangan Foods</h2>
        <select id="food-city-filter" class="city-filter">
          <option value="all">All Cities</option>
        </select>
        <div id="foods-list" class="big-card-list"></div>
      </section>

      <!-- Lodging -->
      <section id="lodging" class="page">
        <h2>Lodging & Hotels</h2>
        <select id="lodging-city-filter" class="city-filter">
          <option value="all">All Cities</option>
        </select>
        <div id="lodging-list" class="big-card-list"></div>
      </section>

      <!-- Routes -->
      <section id="routes" class="page">
        <h2>Routes & Fares</h2>
        <select id="routes-city-filter" class="city-filter">
          <option value="all">All Areas</option>
        </select>
        <div id="routes-list" class="big-card-list"></div>
      </section>

      <!-- Map -->
      <section id="map" class="page">
        <h2>Map ‚Äî Pampanga</h2>
        <div class="map-box">
          <iframe src="https://www.openstreetmap.org/export/embed.html?bbox=120.2400%2C14.7380%2C120.9230%2C15.3700&layer=mapnik"></iframe>
        </div>
      </section>

      <!-- Attractions -->
      <section id="attractions" class="page">
        <h2>Tourist Attractions</h2>
        <select id="attractions-city-filter" class="city-filter">
          <option value="all">All Cities</option>
        </select>
        <div id="attractions-list" class="big-card-list"></div>
      </section>

    </main>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav">
      <button class="nav-btn active" data-page="home">üè† Home</button>
      <button class="nav-btn" data-page="municipalities">üèòÔ∏è LGUs</button>
      <button class="nav-btn" data-page="foods">üç¥ Food</button>
      <button class="nav-btn" data-page="lodging">üè® Lodging</button>
      <button class="nav-btn" data-page="routes">üõ∫ Routes</button>
      <button class="nav-btn" data-page="map">üó∫Ô∏è Map</button>
      <button class="nav-btn" data-page="attractions">üé° Attractions</button>
    </nav>

  </div>

  <!-- MODALS -->
  <div id="detailModal" class="modal">
    <div class="modal-card">
      <button id="closeModal" class="close">‚úï</button>
      <img id="modalImg">
      <h2 id="modalTitle"></h2>
      <p id="modalDesc" class="muted"></p>
      <iframe id="modalMap"></iframe>
    </div>
  </div>

  <div id="missionModal" class="modal">
    <div class="modal-card">
      <button id="closeMission" class="close">‚úï</button>
      <h2>Mission & Vision</h2>
      <p><strong>Mission:</strong> Matenakan‚Äôs mission is ...</p>
      <p><strong>Vision:</strong> A leading Kapampangan company ...</p>
      <hr>
      <h2>Brand Story</h2>
      <p>KPMPNGN is a mobile application ...</p>
      <hr>
      <h2>Contact Us</h2>
      <p><strong>Email:</strong> metanakankapampangancompany@gmail.com</p>
    </div>
  </div>

  <!-- SCRIPT: AUTH, LAYOUT FIXES -->
  <script>
    function switchForm(type) {
      loginForm.style.display = type === "login" ? "block" : "none";
      registerForm.style.display = type === "register" ? "block" : "none";
      forgotForm.style.display = type === "forgot" ? "block" : "none";
    }

    document.addEventListener("DOMContentLoaded", () => {

      const overlay = document.getElementById('loginOverlay');
      const phoneShell = document.querySelector('.phone-shell');

      overlay.style.display = "flex";
      phoneShell.classList.add("app-hidden");

      // REGISTRATION
      registerForm.addEventListener("submit", e => {
        e.preventDefault();

        let user = regUser.value.trim();
        let pass = regPass.value.trim();

        if (localStorage.getItem("user_" + user)) {
          alert("Username already taken!");
          return;
        }

        localStorage.setItem("user_" + user, pass);
        alert("Registration Successful!");
        switchForm("login");
      });

      // LOGIN
      loginForm.addEventListener("submit", e => {
        e.preventDefault();

        const user = loginUser.value.trim();
        const pass = loginPass.value.trim();
        const stored = localStorage.getItem("user_" + user);

        if (stored === pass) {
          overlay.style.display = "none";
          phoneShell.classList.remove("app-hidden");
          alert("Welcome, " + user + "!");
        } else {
          alert("Invalid login");
        }
      });

      // FUN FACT
      const facts = [
        "For two years, Pampanga was once the capital of the Philippines.",
        "Sisig originated in Angeles City.",
        "San Fernando hosts the Giant Lantern Festival.",
        "Mt. Pinatubo eruption cooled global temperatures.",
        "Pampanga was first Spanish province in Luzon."
      ];

      funFactText.textContent = facts[Math.floor(Math.random() * facts.length)];
    });

    // SERVICE WORKER (PWA)
    if ("serviceWorker" in navigator) {
      navigator.serviceWorker.register("service-worker.js");
    }
  </script>

  <!-- SCRIPT.JS -->
  <script src="script.js"></script>

</body>
</html>
